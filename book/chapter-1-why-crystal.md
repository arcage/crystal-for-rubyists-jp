# 第1章: なぜ Crystal なのか？

もしあなたが Ruby を使ったソフトウェア開発をしていて、それで生活できていて、しかもそれを楽しめているのであれば、Crystal を検討する理由はなんでしょう？

ここで少し Ruby について少し考えてみましょう。Ruby の弱いところはどこでしょうか？ 私にとって以下の3点がそれにあたります。

* 並行処理
* 実行速度
* ドキュメント生成

では Ruby の素晴らしい点は？

* ブロック
* なんとなく書けて、動く
* 簡単な構文
* 開発しやすさに重きを置いている
* すぐ書いてすぐ実行できる
* 動的型付け言語であること

なので、Ruby のように簡単で、並列処理を扱えて、高速に実行できる言語があれば、多くのことを学習することがでるはずです。とはいえ、匿名関数や簡単な構文を犠牲にしたくありませんし、`AbstractFactoryFactoryImpls` なんてものを作りたくもありません。

私が思うに、_Crystal_ はまさにそうした言語です。

現時点の Crystal は完璧な言語ではありません（日々改善が進んではいます）。しかし、「学習」という観点で見た場合、馴染みがありながら、相違点もまた多い言語からは、より多くを学べるはずです。

たとえば、Crystal での “Hello World” はこうです。

```ruby
puts "Hello, world!"
```

並行処理版だとこう。

```ruby
channel = Channel(String).new
10.times do
  spawn {
    channel.send "Hello?"
  }
  puts channel.receive
end
```

これをざっくり Ruby に書き直すと、次のようになります。

```ruby
10.times.map do
  Thread.new do
    puts "Hello?"
  end
end.each(&:join)
```

Crystal が Ruby とよく似ている点を書き出してみましょう。

* 構文がほぼ同じ
* 変数は静的型付け言語ですが、型推論があるため、型を宣言する必要がない

一方、違うのは以下の点です。

* 静的型付け型のコンパイル言語なので、問題があればコンパイラが指摘してくれる

しかも、

```text
$ time ./hello
./hello  0.00s user 0.00s system 73% cpu 0.008 total

$ time ruby hello.rb
ruby hello.rb  0.03s user 0.01s system 94% cpu 0.038 total
```

五倍も速い！（あまり意味の無いベンチマークですが）

つまり、私が言いたいことはこうです。Crystal の構文は Ruby とよく似ていて、Ruby を使っているような我々にとって馴染みのあるもです。でありながら、Ruby に足りない点を補って強みとしています。そしてそれこそが、Crystal に触れることで（たとえもし Crystal を仕事に使わなかったとしても）、多くのことを学べると私が思う理由です。

